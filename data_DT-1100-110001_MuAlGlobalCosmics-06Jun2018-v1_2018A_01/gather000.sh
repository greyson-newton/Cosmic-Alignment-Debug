#/bin/sh
# ./createJobs.py data_DT-1100-110001_MuAlGlobalCosmics-06Jun2018-v1_2018A_ 1 data_DT-1100-111111_2018UL_IOV1_CMSSW106_JSON-313041-320377_dataRun2_MuAl_v1_01.db MuAlGlobalCosmics-06Jun2018-v1_2018A.py --inputInBlocks -s data_DT-1100-110001_MuAlGlobalCosmics-06Jun2018-v1_2018A.sh --validationLabel data_DT-1100-110001_MuAlGlobalCosmics-06Jun2018-v1_2018A --b --user_mail youremail --minTrackPt 30 --maxTrackPt 200 --maxDxy 0.2 --minNCrossedChambers 1 --residualsModel pureGaussian --peakNSigma 1.6 --station123params 110001 --station4params 100001 --cscparams 100001 --useResiduals 1100 --mapplots --curvatureplots --segdiffplots --extraPlots --globalTag 105X_dataRun2_v6 --createAlignNtuple --noCleanUp --noCSC --gprcdconnect sqlite_file:GPR_Aug03_2019_SW1060_GT106X_dataRun2_newTkAl_v18_IOV2_dL_iter1.db --gprcd IdealGeometry --is_Alca --T0 --iscosmics

export ALIGNMENT_CAFDIR=`pwd`

cd /afs/cern.ch/work/g/grnewton/public/CMSSW_10_5_0/src
eval `scramv1 run -sh`
export ALIGNMENT_AFSDIR=`pwd`

export ALIGNMENT_INPUTFILES='/store/data/Run2018A/Cosmics/ALCARECO/MuAlGlobalCosmics-06Jun2018-v1/80000/CE2E324F-A173-E811-8328-441EA158FECC.root /store/data/Run2018A/Cosmics/ALCARECO/MuAlGlobalCosmics-06Jun2018-v1/80000/2A84F333-BC74-E811-B2BC-002590DD7C9E.root /store/data/Run2018A/Cosmics/ALCARECO/MuAlGlobalCosmics-06Jun2018-v1/80000/E0B31E8F-C973-E811-9938-984BE164408A.root /store/data/Run2018A/Cosmics/ALCARECO/MuAlGlobalCosmics-06Jun2018-v1/80000/0E6A0380-9D72-E811-B9BA-D4AE52901D66.root /store/data/Run2018A/Cosmics/ALCARECO/MuAlGlobalCosmics-06Jun2018-v1/80000/5E774BCB-B771-E811-803F-1418774A2868.root /store/data/Run2018A/Cosmics/ALCARECO/MuAlGlobalCosmics-06Jun2018-v1/80000/FC781F45-BE73-E811-A44E-8CDCD4A99E60.root /store/data/Run2018A/Cosmics/ALCARECO/MuAlGlobalCosmics-06Jun2018-v1/80000/FAEE7DDC-C174-E811-A341-0025905C4264.root /store/data/Run2018A/Cosmics/ALCARECO/MuAlGlobalCosmics-06Jun2018-v1/80000/9C0C76D4-7B74-E811-BA05-8CDCD4A99E60.root /store/data/Run2018A/Cosmics/ALCARECO/MuAlGlobalCosmics-06Jun2018-v1/80000/E8B2BE16-AF73-E811-8022-0022640631AE.root /store/data/Run2018A/Cosmics/ALCARECO/MuAlGlobalCosmics-06Jun2018-v1/80000/7E9443D9-C174-E811-8710-0023AEEEB6CD.root /store/data/Run2018A/Cosmics/ALCARECO/MuAlGlobalCosmics-06Jun2018-v1/80000/F875EDE2-C174-E811-B31F-44A84225C893.root /store/data/Run2018A/Cosmics/ALCARECO/MuAlGlobalCosmics-06Jun2018-v1/80000/C4D6341C-8072-E811-9432-90B11C444108.root /store/data/Run2018A/Cosmics/ALCARECO/MuAlGlobalCosmics-06Jun2018-v1/80000/421B4066-9473-E811-BA4B-441EA1616D3C.root /store/data/Run2018A/Cosmics/ALCARECO/MuAlGlobalCosmics-06Jun2018-v1/80000/5830EE2F-AF74-E811-AD0C-D4856445D504.root /store/data/Run2018A/Cosmics/ALCARECO/MuAlGlobalCosmics-06Jun2018-v1/80000/54B016AC-7A74-E811-BAAF-D4856445E5A4.root /store/data/Run2018A/Cosmics/ALCARECO/MuAlGlobalCosmics-06Jun2018-v1/80000/369EB9D8-7B74-E811-A9C1-00226406926C.root /store/data/Run2018A/Cosmics/ALCARECO/MuAlGlobalCosmics-06Jun2018-v1/80000/36CAFFBF-7C74-E811-8742-A45D36FC89C4.root /store/data/Run2018A/Cosmics/ALCARECO/MuAlGlobalCosmics-06Jun2018-v1/80000/6AA79FF2-2772-E811-BF11-0025905B85E8.root /store/data/Run2018A/Cosmics/ALCARECO/MuAlGlobalCosmics-06Jun2018-v1/80000/E8140CF0-4F72-E811-AAE3-FA163ED1AF33.root /store/data/Run2018A/Cosmics/ALCARECO/MuAlGlobalCosmics-06Jun2018-v1/80000/72936FC7-8D73-E811-80CE-3C4A92F8FC32.root'
export ALIGNMENT_ITERATION=1
export ALIGNMENT_JOBNUMBER=0
export ALIGNMENT_MAPPLOTS=True
export ALIGNMENT_SEGDIFFPLOTS=True
export ALIGNMENT_CURVATUREPLOTS=True
export ALIGNMENT_GLOBALTAG=105X_dataRun2_v6
export ALIGNMENT_INPUTDB=data_DT-1100-111111_2018UL_IOV1_CMSSW106_JSON-313041-320377_dataRun2_MuAl_v1_01.db
export ALIGNMENT_TRACKERCONNECT=
export ALIGNMENT_TRACKERALIGNMENT=Alignments
export ALIGNMENT_TRACKERAPECONNECT=
export ALIGNMENT_TRACKERAPE=AlignmentErrorsExtended
export ALIGNMENT_TRACKERBOWSCONNECT=
export ALIGNMENT_TRACKERBOWS=TrackerSurfaceDeformations
export ALIGNMENT_GPRCDCONNECT=sqlite_file:GPR_Aug03_2019_SW1060_GT106X_dataRun2_newTkAl_v18_IOV2_dL_iter1.db
export ALIGNMENT_GPRCD=IdealGeometry
export ALIGNMENT_ISCOSMICS=True
export ALIGNMENT_STATION123PARAMS=110001
export ALIGNMENT_STATION4PARAMS=100001
export ALIGNMENT_CSCPARAMS=100001
export ALIGNMENT_MUONCOLLECTIONTAG=
export ALIGNMENT_MINTRACKPT=30
export ALIGNMENT_MAXTRACKPT=200
export ALIGNMENT_MINTRACKP=0
export ALIGNMENT_MAXTRACKP=10000
export ALIGNMENT_MAXDXY=0.2
export ALIGNMENT_MINTRACKERHITS=15
export ALIGNMENT_MAXTRACKERREDCHI2=10
export ALIGNMENT_MINNCROSSEDCHAMBERS=1
export ALIGNMENT_ALLOWTIDTEC=True
export ALIGNMENT_TWOBIN=None
export ALIGNMENT_WEIGHTALIGNMENT=None
export ALIGNMENT_MINALIGNMENTHITS=5
export ALIGNMENT_COMBINEME11=True
export ALIGNMENT_MAXEVENTS=-1
export ALIGNMENT_SKIPEVENTS=0
export ALIGNMENT_MAXRESSLOPEY=10
export ALIGNMENT_DO_DT=True
export ALIGNMENT_DO_CSC=False
export ALIGNMENT_JSON=
export ALIGNMENT_CREATEMAPNTUPLE=False
#export ALIGNMENT_CREATEALIGNNTUPLE=True
export ALIGNMENT_PREFILTER=False
export ALIGNMENT_T0CORR=True
export ALIGNMENT_ISALCARECO=True
export ALIGNMENT_ISMC=None
export ALIGNMENT_STORELAYERDT=None
export ALIGNMENT_STORELAYERCSC=None

if [ "zzz$ALIGNMENT_JSON" != "zzz" ]; then
  cp -f $ALIGNMENT_JSON $ALIGNMENT_CAFDIR/
fi

cp -f data_DT-1100-110001_MuAlGlobalCosmics-06Jun2018-v1_2018A_01/gather_cfg.py data_DT-1100-111111_2018UL_IOV1_CMSSW106_JSON-313041-320377_dataRun2_MuAl_v1_01.db GPR_Aug03_2019_SW1060_GT106X_dataRun2_newTkAl_v18_IOV2_dL_iter1.db  $ALIGNMENT_CAFDIR/
cd $ALIGNMENT_CAFDIR/
cmsRun gather_cfg.py
cp -f *.tmp plotting*.root $ALIGNMENT_AFSDIR/data_DT-1100-110001_MuAlGlobalCosmics-06Jun2018-v1_2018A_01/
